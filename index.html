<script>
// Page Loading
window.addEventListener('load', () => {
  const loader = document.getElementById('loader');
  if (!loader) return;
  loader.style.opacity = '0';
  setTimeout(() => {
    loader.style.display = 'none';
  }, 500);
});

// Mobile Menu Toggle
const mobileMenu = document.getElementById('mobile-menu');
const navMenu = document.getElementById('nav-menu');
if (mobileMenu && navMenu) {
  mobileMenu.addEventListener('click', () => {
    navMenu.classList.toggle('active');
    mobileMenu.classList.toggle('active');
  });
}

// Smooth Scrolling
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', e => {
    e.preventDefault();
    const target = document.querySelector(anchor.getAttribute('href'));
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    if (navMenu) navMenu.classList.remove('active');
  });
});

// Scroll Animations
const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -100px 0px' };
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) entry.target.classList.add('animated');
  });
}, observerOptions);
document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));

// Header Background on Scroll
window.addEventListener('scroll', () => {
  const header = document.querySelector('header');
  if (!header) return;
  header.style.background = window.scrollY > 100 ? 'rgba(255, 255, 255, 0.98)' : 'rgba(255, 255, 255, 0.95)';
});

// Dynamic Text Animation
const titles = ["Data Engineer", "ETL Developer", "Python Developer", "SQL Expert", "Problem Solver"];
let titleIndex = 0;
const titleElement = document.querySelector('.hero .subtitle');
function changeTitle() {
  if (!titleElement) return;
  titleElement.style.opacity = '0';
  setTimeout(() => {
    titleIndex = (titleIndex + 1) % titles.length;
    titleElement.textContent = titles[titleIndex];
    titleElement.style.opacity = '1';
  }, 500);
}
setInterval(changeTitle, 3000);

// Typing Effect for Hero Description
const heroDescription = document.querySelector('.hero .description');
if (heroDescription) {
  const originalText = heroDescription.textContent;
  heroDescription.textContent = '';
  function typeText(text, element, speed = 30) {
    let i = 0;
    const timer = setInterval(() => {
      if (i < text.length) {
        element.textContent += text.charAt(i++);
      } else {
        clearInterval(timer);
      }
    }, speed);
  }
  setTimeout(() => typeText(originalText, heroDescription, 30), 2000);
}

// Skill Cards Hover Effect
document.querySelectorAll('.skill-card').forEach(card => {
  card.addEventListener('mouseenter', function() {
    this.style.transform = 'translateY(-15px) rotateY(5deg)';
  });
  card.addEventListener('mouseleave', function() {
    this.style.transform = 'translateY(0) rotateY(0)';
  });
});

// Project Cards Interactive Effect
document.querySelectorAll('.project-card').forEach(card => {
  card.addEventListener('mousemove', function(e) {
    const rect = this.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    const centerX = rect.width / 2;
    const centerY = rect.height / 2;
    const rotateX = (y - centerY) / 10;
    const rotateY = (centerX - x) / 10;
    this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(10px)`;
  });
  card.addEventListener('mouseleave', function() {
    this.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateZ(0)';
  });
});

// Parallax effect for hero section (FIXED)
window.addEventListener('scroll', () => {
  const hero = document.querySelector('.hero');
  if (!hero) return;
  const scrolled = window.pageYOffset;
  const rate = scrolled * -0.5;
  hero.style.transform = "translateY(" + rate + "px)";
});
</script>
